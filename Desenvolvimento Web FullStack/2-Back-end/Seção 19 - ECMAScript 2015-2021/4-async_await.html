<html>
    <body>
        <script>
            let processoAssincrono = new Promise((resolve, reject) => {
                setTimeout(() => resolve('Sucesso no processo assíncrono'), 3000)
            })

            async function recuperarDados() {
                /* await indica que a função precisa aguardar a resolução dessa linha de código para seguir a sua sequência de instruções, caso contrário os console.log executariam todos antes. Uma função definida como async automaticamente se torna uma promise, podendo ser encadeados then ou catch */
                await processoAssincrono.then(p => console.log(p))

                console.log('Processamento assíncrono 1')

                await fetch('https://jsonplaceholder.typicode.com/comments')
                    .then(r => r.json())
                    .then(d => console.log('COMMENTS: ', d))

                console.log('Processamento assíncrono 2')

                await fetch('https://jsonplaceholder.typicode.com/posts')
                    .then(r => r.json())
                    .then(d => console.log('POSTS: ', d))

                console.log('Processamento assíncrono 3')

                return 'Fim'
            }

            recuperarDados().then(p => console.log(p))
            
        </script>
    </body>
</html>